---
title: "[effective-java] enum ì— ëŒ€í•´ ì•Œì•„ë³´ê¸°(1)"
excerpt: "enum ê¸°ë³¸"

categories:
  - java-core
tags:
  - [java, enum]

permalink: /java-core/enum_1/

toc: true
toc_sticky: true

date: 2022-02-01
last_modified_at: 2022-02-01
---


## ğŸ¦¥ Enum ì´ë€

**java ì—´ê±°í˜•(ì—´ê±°íƒ€ì…, enum Type)**
  - since jdk5.0
  - ê° ìƒìˆ˜ë‹¹ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•œë‹¤. 
  - ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ë‚´ë¶€ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 
  - ì•„ë˜ ì˜ˆì—ì„œ ì¸ìŠ¤í„´ìŠ¤ëŠ” 5ê°œê°€ ìƒì„±ë˜ë©°, `InsuranceType.PENSION.getName();` í˜•íƒœë¡œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. 

```java
public enum InsuranceType {
	
	PENSION("ì—°ê¸ˆ"), FAMILY("ê°€ì¡±"), HEALTH("ê±´ê°•"), GROUP("ë‹¨ì²´"), WHOLE("ì¢…ì‹ ") ;
	String name;
	InsuranceType(String name) {
		this.name = name;
	}
	public String getName() {
		return name;
	}
}
```

- ê° enum ì¸ìŠ¤í„´ìŠ¤ëŠ” ìœ ì¼í•˜ë¯€ë¡œ equals ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤. ==ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤. 

```java
public class TestApp {
	
	public static boolean isPensionType(InsuranceType type) {
		return type == InsuranceType.PENSION ? true : false;
	}
	
	public static void main(String[] args) {
		System.out.println(isPensionType(InsuranceType.FAMILY));
		//result: >> false
		System.out.println(isPensionType(InsuranceType.PENSION));
		//result: >> true
	}
}
```
- toStringë„ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ë¦„ì„ ìë™ìœ¼ë¡œ ì¶œë ¥í•´ì¤€ë‹¤. ë¬¼ë¡  ì¬ì •ì˜í•´ì¤„ìˆ˜ ìˆë‹¤. 

```java
    @Override
	public String toString() {
		return super.toString() + "["+this.name+"]";
	}
    public static void main(String[] args) {
		System.out.println(InsuranceType.FAMILY);
		//result: >> FAMILY[ê°€ì¡±]
	}
```

- ì •ì ë©”ì„œë“œì¸ valueOfë¥¼ í†µí•´ eunm ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ex) `InsuranceType type = InsuranceType.valueOf("FAMILY");` 
- ì •ì ë©”ì„œë“œ values()ì€ ì „ì²´ enum ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜í•œë‹¤.

```java
    InsuranceType[] types = InsuranceType.values();
    for(InsuranceType type : types) {
        System.out.println(type);
    }
```

- enum ì¸ìŠ¤í„´ìŠ¤ëŠ” í•œë²ˆë§Œ ìƒì„±ë¨ì„ ë³´ì¥ë°›ëŠ”ë‹¤. ë˜í•œ í´ë¼ì´ì–¸íŠ¸ê°€ enum ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìœ¼ë©°, ìƒì„±ì ì„ ì–¸ì€ private ìœ¼ë¡œ í•œë‹¤. private ì€ ìƒëµí•´ë„ ëœë‹¤. 
- ì´ëŸ° íŠ¹ì„±ë•Œë¬¸ì— ì‹±ê¸€í†¤ íŒ¨í„´ì— ì‚¬ìš©ë˜ê¸°ë„ í•œë‹¤. 

```java
public enum InsuranceType {
	
	PENSION("ì—°ê¸ˆ"), FAMILY("ê°€ì¡±"), HEALTH("ê±´ê°•"), GROUP("ë‹¨ì²´"), WHOLE("ì¢…ì‹ ") ;
	
	String name;

	//public ë˜ëŠ”  protected ë¡œ í•˜ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
	private InsuranceType(String name) {
		this.name = name;
	}
	
	public String getName() {
		return name;
	}
	
	@Override
	public String toString() {
		return super.toString() + "["+this.name+"]";
	}
}
```

```java
//ì‹±ê¸€í†¤ ê°ì²´ ìƒì„± ë°©ë²•
public class SingletonPattern {
	public static void main(String[] args) {
		//ì •ì  íŒ©í„°ë¦¬ ë°©ì‹
		Singleton1.getInstance().run();
		//Enum ë°©ì‹
		Singleton2.INSTANCE.run();
	}
}

class Singleton1{
	private static final Singleton1 INSTANCE = new Singleton1();
	private Singleton1() {}
	public static Singleton1 getInstance() {return INSTANCE;}
	public void run() {System.out.println("Singleton2");}
}

enum Singleton2{
	INSTANCE;
	public void run() {System.out.println("Singleton2");}
}
```

- ì‹±ê¸€í†¤ì€ enumì„ ì´ìš©í•´ ì…ìƒí•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ë‹¤. 
- enum ì—ì„œ ë©¤ë²„ë³€ìˆ˜ ê°’ì„ ì´ˆê¸°í™”í• ë•ŒëŠ” static ì„ ì´ìš©í•œë‹¤.(ì •ì  ì´ˆê¸°í™” ë¸”ë¡)

```java
public enum InsuranceType {
	
	PENSION("ì—°ê¸ˆ"), FAMILY("ê°€ì¡±"), HEALTH("ê±´ê°•"), GROUP("ë‹¨ì²´"), WHOLE("ì¢…ì‹ ") ;
	
	private String name;
	private int index;

	//ë©¤ë²„ í•„ë“œ ì´ˆê¸°í™”
	static {
		int temp = 1;
		for(InsuranceType type : InsuranceType.values()) {
			type.index = temp++;
		}
	}

	//public ë˜ëŠ”  protected ë¡œ í•˜ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
	private InsuranceType(String name) {
		this.name = name;
	}
	
	public String getName() {
		return name;
	}
	
	public int getIndex() {
		return index;
	}
	
	@Override
	public String toString() {
		return super.toString() + "["+this.name+"]";
	}
	
	public static void main(String[] args) {
		for(InsuranceType type : InsuranceType.values()) {
			System.out.printf("%d , ", type.getIndex());
		}
		//result >> 1 , 2 , 3 , 4 , 5 , 
	}
}
```

- enum ì„ ìŠ¤ìœ„ì¹˜ë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‹¨ íƒ€ì…(ì•„ë˜ ì˜ˆì œì—ì„œëŠ” InsuranceType)ì€ ìƒëµí•´ì•¼ í•œë‹¤.
- switch ë¬¸ ë‚´ì— ì“°ì¸ í‘œí˜„ì‹ì—ì„œ íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤.

```java
public static int switchEample(InsuranceType type) {
		int result = 0;
		switch (type) {
		case FAMILY: 
			result = 10; break;
		case PENSION: 
			result = 20; break;
		case HEALTH:
			result = 30; break;
		case GROUP:
			result = 40; break;
		default : 
			result = 100;break;
		}
		return result;
	}
```
- enum ê° ìƒìˆ˜ë³„ ì¸ìŠ¤í„´ìŠ¤ì— Class body ë¥¼ ë¶™ì¼ìˆ˜ ìˆë‹¤. 
- ë³´í—˜ ìœ í˜•ë³„ë¡œ ë³´í—˜ë£Œ ê³„ì‚°ì„ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ í•˜ê¸° ìœ„í•´, ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„

```java
public enum InsuranceType2 {

	PENSION("ì—°ê¸ˆ") {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	FAMILY("ê°€ì¡±") {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	HEALTH("ê±´ê°•") {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	GROUP("ë‹¨ì²´") {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	WHOLE("ì¢…ì‹ ") {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	};

	private String name;
	private int index;

	private static final double BASIC_RATE = 0.9;

	static {
		int temp = 1;
		for (InsuranceType2 type : InsuranceType2.values()) {
			type.index = temp++;
		}
	}

	// ê° ìƒìˆ˜ë³„ ì¸ìŠ¤í„´ìŠ¤ê°€ êµ¬í˜„í•´ì•¼ í•  ë©”ì„œë“œ ì •ì˜
	abstract double calcuate(int amt);

	// public ë˜ëŠ” protected ë¡œ í•˜ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
	private InsuranceType2(String name) {
		this.name = name;
	}

	public String getName() {
		return name;
	}

	public int getIndex() {
		return index;
	}

	@Override
	public String toString() {
		return super.toString() + "[" + this.name + "]";
	}
}
```

- InsuranceType ê° ìƒìˆ˜ë³„ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ ì í• ë•Œ, switch ë¬¸ì„ ì´ìš©í•  ìˆ˜ ìˆì§€ë§Œ, 
- ê° ìƒìˆ˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‘í•´ì•¼ í•  ë‚´ìš©ì„ ìƒˆë¡œìš´ enum ì„ í†µí•´ êµ¬í˜„í•˜ì—¬, ê¸°ëŠ¥ ìˆ˜í–‰ ì „ëµì„ ì„ íƒí• ìˆ˜ ìˆë„ë¡ í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤. 

```java
public enum InsuranceType2 {

    //ê° ìƒìˆ˜ë³„ ìˆ˜í–‰í•´ì•¼ í•  ê¸°ëŠ¥ì„ ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¡œ ì •ì˜ 
	//ì—°ê¸ˆë³´í—˜ì€ FPë¡œ ê¸°ëŠ¥ ìˆ˜í–‰, ê°€ì¡±ë³´í—˜ì€ GAë¡œ ê¸°ëŠ¥ ìˆ˜í–‰ ì „ëµì„ ì„ íƒ
	PENSION("ì—°ê¸ˆ", Channel.FP) {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	FAMILY("ê°€ì¡±", Channel.GA) {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	HEALTH("ê±´ê°•", Channel.FP) {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	GROUP("ë‹¨ì²´", Channel.GA) {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	WHOLE("ì¢…ì‹ ", Channel.GA) {
		double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	};

	private String name;
	private int index;
	private Channel channel;

	private static final double BASIC_RATE = 0.9;

	static {
		int temp = 1;
		for (InsuranceType2 type : InsuranceType2.values()) {
			type.index = temp++;
		}
	}

	// ê° ìƒìˆ˜ë³„ ì¸ìŠ¤í„´ìŠ¤ê°€ êµ¬í˜„í•´ì•¼ í•  ë©”ì„œë“œ ì •ì˜
	abstract double calcuate(int amt);

	// public ë˜ëŠ” protected ë¡œ í•˜ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
	private InsuranceType2(String name, Channel channel) {
		this.name = name;
		this.channel = channel;
	}

	public String getName() {
		return name;
	}

	public int getIndex() {
		return index;
	}
	
	public Channel getChannel() {
		return channel;
	}
	
	public int businesExpense(int rate) {
		return channel.businesExpenseByChannel(rate);
	}
	
	//ê°ê°ì˜ InsuranceTypeì´ ìˆ˜í–‰í•´ì•¼ í•  ê¸°ëŠ¥ì„ ì•„ë˜ enum ìœ¼ë¡œ êµ¬í˜„í•´ë†“ëŠ”ë‹¤. 
	//GAì¸ ê²½ìš°ì™€ FPì¸ ê²½ìš° ìˆ˜í–‰ ì „ëµì„ ì •ì˜
	enum Channel{
		GA{
			int calcuateExpense(int rate) {
				return 100 * rate;
			}},
		FP{
			int calcuateExpense(int rate) {
				return 500 * rate;
			}};
		abstract int calcuateExpense(int rate);
		int businesExpenseByChannel(int rate) {
			
			return calcuateExpense(rate) + 100;
		}
	}

	@Override
	public String toString() {
		return super.toString() + "[" + this.name + "]";
	}
}
```
 - enum ì„ í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” Map ì—ëŠ” enumMap ì´ ìˆë‹¤. ì–´ë””ì— ì‚¬ìš©ë ê¹Œ?
 - enum ìƒìˆ˜ ìœ í˜•ë³„ë¡œ ê°ì²´ë¥¼ ê·¸ë£¹í•‘í•´ì•¼ í•  ê²½ìš° ì‚¬ìš©í• ìˆ˜ ìˆë‹¤. 

```java
import static java.util.stream.Collectors.*;

import java.util.Arrays;
import java.util.EnumMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;


public class Employee {
	
	private String sno;
	private String name;
	private Step step; // ì§ê¸‰
	
	Employee(String sno, String name, Step step){
		this.sno = sno;
		this.name = name;
		this.step = step;
	}

	public enum Step{
		BA("ì‚¬ì›"), ES("ëŒ€ë¦¬"), FE("ê³¼ì¥");
		private String stepName;
		
		private Step(String stepName){
			this.stepName = stepName;
		}
		
		public String getStepName() {
			return stepName;
		}
	}
	
	@Override
	public String toString() {
		return "Employee [sno=" + sno + ", name=" + name + ", step=" + step + "]\n";
	}

	public static void main(String[] args) {
		
		List<Employee> list = Arrays.asList(
		new Employee("190726", "ì´ìƒêµ­", Step.FE),
		new Employee("190727", "í™ê¸¸ë™", Step.FE),
		new Employee("190728", "ê¹€ê°œë˜¥", Step.FE),
		new Employee("190729", "ê¹€ì—°ì•„", Step.ES),
		new Employee("190734", "í™©ëŒ€í—Œ", Step.BA),
		new Employee("190745", "ìœ¤ì„ì—´", Step.BA)
		);
		
		//ì§ê¸‰ë³„ë¡œ ì‚¬ì›ì„ ëª¨ì•„ë‘” ë§µ
		Map<Step, Set<Employee>> enumMap = new EnumMap<>(Employee.Step.class);
		for(Employee.Step step : Employee.Step.values()) {
			enumMap.put(step, new HashSet<>());
		}
		for(Employee emp : list) {
			enumMap.get(emp.step).add(emp);
		}
		
		//enumMap ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•1
		Map<Step, List<Employee>> collect = list.stream().collect(groupingBy(emp -> emp.step));
		
		//enumMap ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•2
		EnumMap<Step, Set<Employee>> collect2 = list.stream()
				.collect(groupingBy(emp -> emp.step, () -> new EnumMap<>(Step.class), toSet()));
		
		System.out.println(enumMap);
		System.out.println(collect);
		System.out.println(collect2);
	}
}
```

-  ê¸°ì¡´ enum ì„ ë³€ê²½í•˜ì§€ ì•Šê³ , í™•ì¥í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ? ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ë©´ ëœë‹¤. 

```java
public interface Calculatable {
	
	double calcuate(int amt);

}
```

- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•´ enum ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê²Œ í•œë‹¤. 

```java
public enum Insurance implements Calculatable{

	PENSION("ì—°ê¸ˆ", Channel.FP) {
		public double calcuate(int amt) { // interface êµ¬í˜„
			return BASIC_RATE * getIndex() * amt;
		}
	},
	FAMILY("ê°€ì¡±", Channel.GA) {
		public double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	HEALTH("ê±´ê°•", Channel.FP) {
		public double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	GROUP("ë‹¨ì²´", Channel.GA) {
		public double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	},
	WHOLE("ì¢…ì‹ ", Channel.GA) {
		public double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	};
	...
}
```

```java
public enum InsuranceExtend implements Calculatable{

	LOSS("ì‹¤ì†", Channel.FP) {
		public double calcuate(int amt) { // interface êµ¬í˜„
			return BASIC_RATE * getIndex() * amt;
		}
	},
	TEETH("ì¹˜ì•„", Channel.GA) {
		public double calcuate(int amt) {
			return BASIC_RATE * getIndex() * amt;
		}
	};
    ...
}
```

 - ê¸°ì¡´enum(Insurance)ê³¼ í™•ì¥ëœ enum(InsuranceExtend)ì„ êµ¬í˜„í•˜ì˜€ë‹¤. 

```java
public static <T extends Enum<T> & Calculatable> void extendEnum(Class<T> enumType) {
		T[] enumConstants = enumType.getEnumConstants();
		for(T t : enumConstants) {
			System.out.println(t.calcuate(100));
		}
	}

	public static void main(String[] args) {
		extendEnum(InsuranceExtend.class);
	}
```

- Calculatableë§Œ êµ¬í˜„í•œ Enum ë§Œ ì²˜ë¦¬í•˜ë„ë¡ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- íƒ€ì…ë§¤ê²Œë³€ìˆ˜ `<T extends Enum<T> & Calculatable>` ëŠ” Enum ì´ë©´ì„œ Calculatableì˜ í•˜ìœ„íƒ€ì…ì´ì–´ì•¼ í•œë‹¤ëŠ” ë§ì´ë‹¤.
- java8ë¶€í„°ëŠ” enum ìƒì„±ì íŒŒë¼ë¯¸í„°ë¡œ lamda ë¥¼ ì‚¬ìš©í• ìˆ˜ë„ ìˆë‹¤. 

```java
public enum InsuranceType2 {

	// ê° ìƒìˆ˜ë³„ ê³„ì‚°ì‹ì„ ëŒë‹¤ë¡œ ë‚˜íƒ€ë‚´ì–´ ì‚¬ìš©
	PENSION("ì—°ê¸ˆ", Channel.FP, ( amt) -> 0.9  * amt),
	FAMILY("ê°€ì¡±", Channel.GA, ( amt) -> 0.9 * amt),
	HEALTH("ê±´ê°•", Channel.FP, ( amt) -> 0.9  * amt),
	GROUP("ë‹¨ì²´", Channel.GA, ( amt) -> 0.9 * amt),
	WHOLE("ì¢…ì‹ ", Channel.GA, ( amt) -> 0.9  * amt);

	private String name;
	private int index;
	private Channel channel;
	private Function<Integer, Double> calFun;
	
	public double calculate(int amt) {
		return this.calFun.apply(amt);
	}

	...
	public static void main(String[] args) {
		InsuranceType2.FAMILY.calculate(100);
	}

```
 - enumSetì€ ì‚°ìˆ ë¹„íŠ¸ì—°ì‚°ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë˜ì–´ ì—°ì‚°ì´ ë¹ ë¥´ë‹¤. 
 - contains, add, remove ë“±ì˜ ë©”ì„œë“œë¥¼ ì œê³µí•˜ë©° ì†ë„ê°€ ë¹ ë¥´ê³ , ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ ì‚¬ìš©í•œë‹¤. 
 
```java
	public static void enumSetTest() {
		EnumSet<Insurance> set = EnumSet.of(Insurance.FAMILY, Insurance.GROUP, Insurance.HEALTH);
		set.forEach(System.out::println);
		System.out.println(set.contains(Insurance.WHOLE));

		// ë¹ˆ enumSet
		EnumSet<Insurance> noneOf = EnumSet.noneOf(Insurance.class);
		noneOf.add(Insurance.FAMILY);
		noneOf.remove(Insurance.FAMILY);
	}
```

# Reference
> - effective java 3/E
