---
title: "[tools] ë©”ì´ë¸(maven) í•™ìŠµ"
excerpt: "ë©”ì´ë¸(maven) ê¸°ë³¸ê³¼ ëª‡ ê°€ì§€ í”ŒëŸ¬ê·¸ì¸ì— ëŒ€í•´ ì•Œì•„ë´„"

categories:
  - tools
tags:
  - [maven]

permalink: /tools/maven_part1/

toc: true
toc_sticky: true

date: 2022-03-14
last_modified_at: 2022-03-14
---

## ğŸ¦¥ maven ìœ¼ë¡œ ìë°” í”„ë¡œì íŠ¸ ìƒì„±í•˜ê¸°

 - ì•„ë˜ ëª…ë ¹ì–´ëŠ” ì˜¨ë¼ì¸ìƒíƒœì—ì„œ ì§„í–‰, ì˜¤í”„ë¼ì¸ì—ì„œë„ ë°©ë²•ì´ ìˆì„ê²ƒ ê°™ê¸´ í•˜ë‹¤.
 - maven í”„ë¡œì íŠ¸ ìƒì„±ì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ì´ ë‹¤ìš´ë¡œë“œë˜ì–´ì•¼ í•˜ëŠ”ë“¯ í•¨.

 - mvn archetype:generate -DgroupId=com.sk.sample -DartifactId=sampleProject -DarchetypeArtifactId=maven-archetype-quickstart

 - console ìƒì—ì„œ ëª…ë ¹ì–´ë¡œ ì§„í–‰í•˜ëŠ” ëŒ€ì‹ , ì´í´ë¦½ìŠ¤ì—ì„œ maven í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤. 

![image1](/assets/images/page12/step1.JPG)

 - ìµœì´ˆì—ëŠ” ì•„ë˜ì™€ ê°™ì´ pom.xml ì´ ìƒì„±ëœë‹¤.

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.sk</groupId>
  <artifactId>maven-basic</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>maven-basic</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project>
```

 - maven ì˜ ê¸°ë³¸ ìë°” ë²„ì „ì€ 1.5 ì´ê³ , junit ë„ ì˜›ë‚  ë²„ì „ìœ¼ë¡œ ë˜ì–´ ìˆë‹¤. 
 - ì¼ë‹¨ junitì„ ì‚­ì œí•˜ê³ , javaë²„ì „ì„ 8ë¡œ ì˜¬ë¦°ë‹¤. 

![image1](/assets/images/page12/step2.JPG)

 - pom.xmlì„ ìˆ˜ì •í•œ í›„ì—ëŠ” ì´í´ë¦½ìŠ¤ì˜ í”„ë¡œì íŠ¸ì½”ë“œë¥¼ maven -> update project,, í•´ì¤˜ì•¼ í•œë‹¤. 

## maven ë¹Œë“œí•´ë³´ê¸°

 - cmdì—ì„œ pom.xml ì´ ìˆëŠ” ê²½ë¡œë¡œ ì´ë™í•œë‹¤.
 - `mvn clean package` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. 
 - target ë””ë ‰í† ë¦¬ê°€ ìƒì„±ë˜ê³ , í•˜ìœ„ì— jar íŒŒì¼ê³¼ classes í•˜ìœ„ì— class íŒŒì¼ì´ ìƒì„±ëœë‹¤. 
 - ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ main ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤. 
 - `java -cp target/classes com.sk.basic.App` ë˜ëŠ”
 - `java -cp target/maven-basic-0.0.1-SNAPSHOT.jar com.sk.basic.App`
 - ë‹¤ìŒì€ dependency ë¥¼ ì¶”ê°€í•´ë³´ì.
 - pom.xml ì— ì•„ë˜ì™€ ê°™ì´ build ë¥¼ ì¶”ê°€í•œë‹¤. 

```xml
<build>
		<finalName>maven-sample</finalName>
		<sourceDirectory>src/main/java</sourceDirectory>

		<plugins>
			<plugin>
				<artifactId>maven-eclipse-plugin</artifactId>
				<version>2.9</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>2.4</version>
				<executions>
					<execution>
						<id>copy-dependencies</id>
						<phase>package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
```
 
  -  ë©”ì´ë¸ì—ì„œ jar íŒ¨í‚¤ì§•ì‹œì—ëŠ” ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ í•¨ê»˜ íŒ¨í‚¤ì§• ë˜ì§€ ì•ŠëŠ”ë‹¤. maven-dependency-plugin í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ íŠ¹ì • ë””ë ‰í† ë¦¬ì— ë³µì‚¬ì‹œì¼œì£¼ëŠ” ê¸°ëŠ¥ì„ í•´ì¤€ë‹¤. 
  - main-jar-plugin ì€ í˜„ì¬ê²½ë¡œì—ì„œì˜ lib í´ë”ì˜ íŒŒì¼ë“¤ì„ classpathë¡œ ì¶”ê°€ì‹œì¼œì¤€ë‹¤.

 - ë‹¤ì‹œ mvn clean package ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤. ê·¸ëŸ¼ dependency í´ë”ì— ì˜ì¡´ê´€ê³„ì— ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ìƒì„±ëœë‹¤.
 - ì˜ì¡´ì„±ì„ ê°–ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ì—¬ ë‹¤ì‹œ main ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤. 
 - `java -cp target/maven-sample.jar;target/dependency/* com.sk.basic.App`
 - `java -cp target/classes;target/dependency/* com.sk.basic.App`
 - ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ê²½ë¡œêµ¬ë¶„ê°’ìœ¼ë¡œ ':'ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. 
 - `java -cp target/classes:target/dependency/* com.sk.basic.App`
 - `java -classpath target/classes:target/dependency/* com.sk.basic.App`
 - ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ìœ„ ëª…ë ¹ì–´ë¥¼ sh íŒŒì¼ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

## Maven compile 

- maven-compiler-pluginì€ ì»´íŒŒì¼ì‹œ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤. 
- dependency ì— ì •ì˜ë˜ì§€ ì•Šì€ ê²½ìš°, cp ì˜µì…˜ì„ í†µí•´, ë¹Œë“œíŒ¨ìŠ¤ë¥¼ ì¡ì•„ì£¼ê³  ì»´íŒŒì¼ í•  ìˆ˜ ìˆë‹¤. 

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<groupId>com.sk</groupId>
	<artifactId>maven-basic</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<packaging>jar</packaging>

	<name>maven-basic</name>
	<url>http://maven.apache.org</url>

	<dependencies>
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-classic</artifactId>
			<version>1.1.2</version>
		</dependency>
	</dependencies>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<maven.compiler.source>1.8</maven.compiler.source>
		<maven.compiler.target>1.8</maven.compiler.target>
	</properties>

	<build>
		<finalName>maven-sample</finalName>
		<sourceDirectory>src/main/java</sourceDirectory>

		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.1</version>
				<configuration>
					<compilerArgs>
						<arg>-cp</arg>
						<arg>lib/guava-18.0.jar;lib/jdom-1.0.jar</arg>
					</compilerArgs>
				</configuration>
			</plugin>
			<!-- <plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jar-plugin</artifactId>
				<version>2.6</version>
				<configuration>
					<archive>
						<manifest>
							<addClasspath>true</addClasspath>
							<packageName>com.sk.basic.App</packageName>
							<classpathPrefix>lib/</classpathPrefix>
						</manifest>
					</archive>
				</configuration>
			</plugin> -->
			<plugin>
				<artifactId>maven-eclipse-plugin</artifactId>
				<version>2.9</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>2.4</version>
				<executions>
					<execution>
						<id>copy-dependencies</id>
						<phase>package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${project.build.directory}/lib</outputDirectory>
							<overWriteReleases>false</overWriteReleases>
							<overWriteSnapshots>false</overWriteSnapshots>
							<overWriteIfNewer>true</overWriteIfNewer>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
</project>

```

 - ë§Œì•½, guava-18.0.jar, jdom-1.0.jar ëŠ” lib í´ë”ì— ìˆê³ , ë‚˜ë¨¸ì§€ëŠ” dependency ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤ë©´,
 í”„ë¡œë•íŠ¸ì½”ë“œëŠ” target/classesì— ìƒì„±ë˜ê³ , dependencyì— ì •ì˜ëœ logbackì€ lib í´ë”ì— ìƒì„±ëœë‹¤.
 guava-18.0.jar, jdom-1.0.jarëŠ” ìˆ˜ì‘ì—…ìœ¼ë¡œ libí´ë”ì— ë„£ì–´ì£¼ê³ , ì•„ë˜ì™€ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤. 

 - `java -cp target/classes;target/lib/* com.sk.basic.App`

 - í•˜ì§€ë§Œ ì´ê±´ ë°”ëŒì§í•œ ë°©ì‹ì´ ì•„ë‹ˆë‹¤. 

```xml
<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.1</version>
				<configuration>
					<skipMain>true</skipMain>
				</configuration>
</plugin>
``` 

 - êµ³ì´ ì»´íŒŒì¼ í• í•„ìš”ê°€ ì—†ë‹¤ë©´, maven-compiler-pluginì— skipMain ì„ true ë¡œ ì„¤ì •í•œë‹¤. 

## Maven ì‹¤í–‰ jar ë§Œë“¤ê¸°

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<groupId>com.sk</groupId>
	<artifactId>maven-basic</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<packaging>jar</packaging>

	<name>maven-basic</name>
<!-- 	<url>http://maven.apache.org</url> -->
	<dependencies>
		<!-- unit testing -->
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<version>4.11</version>
			<scope>test</scope>
		</dependency>

		<dependency>
			<groupId>com.google.guava</groupId>
			<artifactId>guava</artifactId>
			<version>18.0</version>
		</dependency>

		<!-- logger -->
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-classic</artifactId>
			<version>1.1.2</version>
		</dependency>
	</dependencies>

	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<maven.compiler.source>1.8</maven.compiler.source>
		<maven.compiler.target>1.8</maven.compiler.target>
	</properties>

	<build>
		<finalName>maven-sample</finalName>
		<sourceDirectory>src/main/java</sourceDirectory>

		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jar-plugin</artifactId>
				<version>2.6</version>
				<configuration>
					<archive>
						<manifest>
							<addClasspath>true</addClasspath>
							<mainClass>com.sk.basic.App</mainClass>
							<classpathPrefix>lib/</classpathPrefix>
						</manifest>
					</archive>
				</configuration>
			</plugin>
			<plugin>
				<artifactId>maven-eclipse-plugin</artifactId>
				<version>2.9</version>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<version>2.4</version>
				<executions>
					<execution>
						<id>copy-dependencies</id>
						<phase>package</phase>
						<goals>
							<goal>copy-dependencies</goal>
						</goals>
						<configuration>
							<outputDirectory>${project.build.directory}/lib</outputDirectory>
							<overWriteReleases>false</overWriteReleases>
							<overWriteSnapshots>false</overWriteSnapshots>
							<overWriteIfNewer>true</overWriteIfNewer>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
</project>
```
 - java -jar target/maven-sample.jar ëª…ë ¹ì–´ë¡œ main class ë¥¼ ì‹¤í–‰í•œë‹¤. 
 - ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œë„ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤. 

 ##ìŠ¤í”„ë§ ë¶€íŠ¸ maven ë¹Œë“œ í•´ë³´ê¸°

```xml
<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
				<configuration>
					<excludes>
						<exclude>
							<groupId>org.projectlombok</groupId>
							<artifactId>lombok</artifactId>
						</exclude>
					</excludes>
				</configuration>
			</plugin>
		</plugins>
	</build>
```

 - ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œëŠ” spring-boot-maven-plugin ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤ê³  í•œë‹¤. í•˜ì§€ë§Œ, 
 ì €ë ‡ê²Œ í•˜ë©´ í•˜ë‚˜ì˜ jarì— ë‹¤ ë¬¶ì—ê²Œ ë˜ì–´ íŒŒì¼ì‚¬ì´ì¦ˆê°€ ì»¤ì§„ë‹¤. 
 - ë¶„ë¦¬í•˜ê³  ì‹¶ìœ¼ë©´ ìœ„ì—ì„œ í–ˆë˜ ë°©ì‹ëŒ€ë¡œ maven-jar-plugin ì™€ maven-dependency-plugin ë¥¼ ì‚¬ìš©í•œë‹¤.
 - ë§Œì•½ ìŠ¤í”„ë§ë¶€íŠ¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰í•˜ê³ ì í•œë‹¤ë©´, `nohup java -jar xxx.jar &`